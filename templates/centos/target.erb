-- Created by Chef; Using lsync 2.1 config sytax
sync {
    default.<%= @mode %>,
    source      = "<%= @source %>",
<% if @mode == 'rsync' -%>
    <% if @host -%>
    target      = "<% if @user %><%= @user %>@<% end %><%= @host %>:<%= @target %>",
    <% else -%>
    target      = "<%= @target %>",
    <% end -%>
<% elsif @mode == 'rsyncssh' -%>
    targetdir   = "<%= @target %>",
    host        = "<%= @host %>",
<% end -%>
<% if @rsync || @rsync_opts -%>
rsync = {
<% @rsync.each do |k,v| -%>
   <%= k %> = "<%= v %>",
<% end -%>
<%= "    _extra = #{@rsync_opts}" if @rsync_opts -%>
}
<% end -%>
<%= "    exclude     = #{@exclude},\n" if @exclude -%>
<%= "    excludeFrom = \"#{@exclude_from}\",\n" if @exclude_from -%>
}
